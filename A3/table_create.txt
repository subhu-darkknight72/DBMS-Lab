CREATE TABLE Physician( EmployeeID int NOT NULL, Name varchar(50), Position varchar(50), SSN int, PRIMARY KEY(EmployeeID));
CREATE TABLE Department(DepartmentID int not NULL,Name varchar(50),Head int not NULL,PRIMARY KEY(DepartmentID),FOREIGN KEY(Head) REFERENCES Physician(EmployeeID));
CREATE TABLE Affiliated_With(Physician int NOT NULL,Department int NOT NULL,PrimaryAffiliation BOOLEAN,CONSTRAINT pk PRIMARY KEY(Physician, Department),FOREIGN KEY(Physician) REFERENCES Physician(EmployeeID),FOREIGN KEY(Department) REFERENCES Department(DepartmentID));
CREATE TABLE `Procedure`(Code int NOT NULL,Name VARCHAR(50),Cost int,PRIMARY KEY(Code));
CREATE TABLE Patient(SSN int not NULL,Name varchar(50),Address varchar(200),Phone char(10),InsuaranceID int,PCP int NOT NULL,PRIMARY KEY(SSN),FOREIGN KEY(PCP) REFERENCES Physician(EmployeeID));
CREATE TABLE Nurse(EmployeeID INT NOT NULL,Name VARCHAR(50),Position VARCHAR(50),Registered BOOLEAN,SSN INT,PRIMARY KEY(EmployeeID));
CREATE TABLE Appointment(AppointmentID INT NOT NULL,Patient INT NOT NULL,PrepNurse INT,Physician INT NOT NULL,Start TIMESTAMP,End TIMESTAMP,ExaminationRoom varchar(10),PRIMARY KEY(AppointmentID),FOREIGN KEY(Patient) REFERENCES Patient(SSN),FOREIGN KEY(PrepNurse) REFERENCES Nurse(EmployeeID),FOREIGN KEY(Physician) REFERENCES Physician(EmployeeID));
CREATE TABLE Medication(Code INT NOT NULL,Name varchar(50),Brand varchar(50),Description VARCHAR(50),PRIMARY KEY(Code));
CREATE TABLE Prescribes(Physician INT NOT NULL,Patient INT NOT NULL,Medication INT NOT NULL,Date TIMESTAMP NOT NULL,Appointment INT,Dose varchar(50),CONSTRAINT pk PRIMARY KEY(Physician, Patient, Medication, Date),FOREIGN KEY(Physician) REFERENCES Physician(EmployeeID),FOREIGN KEY(Patient) REFERENCES Patient(SSN),FOREIGN KEY(Medication) REFERENCES Medication(Code),FOREIGN KEY(Appointment) REFERENCES Appointment(AppointmentID));
CREATE TABLE `Block`(`Floor` INT NOT NULL,Code INT NOT NULL,CONSTRAINT pk PRIMARY KEY(`Floor`, Code));
CREATE TABLE Room(`Number` INT NOT NULL,`Type` varchar(50),BlockFloor INT NOT NULL,BlockCode INT NOT NULL,Unavailable BOOLEAN,CONSTRAINT PRIMARY KEY(`Number`));
CREATE TABLE On_Call(Nurse INT NOT NULL,BlockFloor INT NOT NULL,BlockCode INT NOT NULL,`Start` TIMESTAMP,`End` TIMESTAMP,CONSTRAINT pk PRIMARY KEY(Nurse, BlockFloor, BlockCode, `Start`, `End`));
CREATE TABLE Stay(StayID INT NOT NULL,Patient INT NOT NULL,Room INT NOT NULL,`Start` TIMESTAMP,`End` TIMESTAMP,PRIMARY KEY(StayID),FOREIGN KEY(Patient) REFERENCES Patient(SSN),FOREIGN KEY(Room) REFERENCES Room(Number));
CREATE TABLE Undergoes(Patient INT NOT NULL,`Procedure` INT NOT NULL,Stay INT NOT NULL,`Date` TIMESTAMP,Physician INT NOT NULL,AssistingNurse INT,CONSTRAINT pk PRIMARY KEY(Patient, `Procedure`, Stay, `Date`),FOREIGN KEY(Patient) REFERENCES Patient(SSN),FOREIGN KEY(`Procedure`) REFERENCES `Procedure`(Code),FOREIGN KEY(Stay) REFERENCES Stay(StayID),FOREIGN KEY(Physician) REFERENCES Physician(EmployeeID),FOREIGN KEY(AssistingNurse) REFERENCES Nurse(EmployeeID));
CREATE TABLE Trained_In(Physician INT NOT NULL,Treatment INT NOT NULL,CertificationDate TIMESTAMP,CertificationExpires TIMESTAMP,CONSTRAINT pk PRIMARY KEY(Physician, Treatment),FOREIGN KEY(Physician) REFERENCES Physician(EmployeeID),FOREIGN KEY(Treatment) REFERENCES `Procedure`(Code));